[
  {
      "name": "Serge_view001_num_USERS_total",
      "sql": "create or replace view grafana.Serge_view001_num_USERS_total as SELECT count(distinct(\"id\"))\nFROM \"coproduction\".\"public\".\"user\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view002_num_users2_per_PROCESS",
      "sql": "create or replace view grafana.Serge_view002_num_users2_per_PROCESS as SELECT COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\") AS \"proc_name\", \"t1\".\"num_users_total\", \"t2\".\"num_users_active\"\nFROM (SELECT \"proc_name\", SUM(\"num_users\") AS \"num_users_total\"\nFROM (SELECT \"cp\".\"name\" AS \"proc_name\", \"p\".\"team_id\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\nFROM \"coproduction\".\"public\".\"permission\" AS \"p\"\nLEFT JOIN \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\nLEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"p\".\"team_id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"a\".\"team_id\" = \"t\".\"id\"\nGROUP BY \"cp\".\"name\", \"p\".\"team_id\")\nGROUP BY \"proc_name\") AS \"t1\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"user_id\") AS \"num_users_active\"\nFROM \"elastic2\".\"logs\".\"log\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\nWHERE \"model\" = 'ASSET'\nGROUP BY \"coproductionprocess\".\"name\") AS \"t2\" ON \"t2\".\"proc_name\" = \"t1\".\"proc_name\"\nORDER BY COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view002w_num_TEAMS_USERS3_per_PROCESS",
      "sql": "create or replace view grafana.Serge_view002w_num_TEAMS_USERS3_per_PROCESS as SELECT COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t0\".\"proc_name\") AS \"proc_name\", \n       \"t0\".\"num_teams\", \"t1\".\"num_users_total\", \"t2\".\"num_users_active\", \n       CASE WHEN \"t1\".\"num_users_total\" = 0 OR \"t1\".\"num_users_total\" IS NULL\n       THEN NULL \n       ELSE ROUND(100 * \"t2\".\"num_users_active\" / \"t1\".\"num_users_total\") \n       END AS \"fraction_active_PCT\"\nFROM (\n    SELECT \"cp\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"p\".\"team_id\") AS \"num_teams\"\n    FROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\n    FULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\n    GROUP BY \"cp\".\"name\"\n) AS \"t0\"\nFULL JOIN (\n    SELECT \"proc_name\", SUM(\"num_users\") AS \"num_users_total\"\n    FROM (\n        SELECT \"cp\".\"name\" AS \"proc_name\", \"p\".\"team_id\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\n        FROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\n        FULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\n        LEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"p\".\"team_id\"\n        FULL JOIN \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"a\".\"team_id\" = \"t\".\"id\"\n        GROUP BY \"cp\".\"name\", \"p\".\"team_id\"\n    )\n    GROUP BY \"proc_name\"\n) AS \"t1\" ON \"t1\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (\n    SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"user_id\") AS \"num_users_active\"\n    FROM \"elastic2\".\"logs\".\"log\"\n    INNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\n    WHERE \"model\" = 'ASSET'\n    GROUP BY \"coproductionprocess\".\"name\"\n) AS \"t2\" ON \"t2\".\"proc_name\" = \"t1\".\"proc_name\"\nORDER BY COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t0\".\"proc_name\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view002y_num_TEAMS_USERS_per_PROC",
      "sql": "create or replace view grafana.Serge_view002y_num_TEAMS_USERS_per_PROC as SELECT COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t0\".\"proc_name\") AS \"proc_name\", \"t0\".\"num_teams\", \"t1\".\"num_users_total\", \"t2\".\"num_users_active\"\nFROM (SELECT \"cp\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"p\".\"team_id\") AS \"num_teams\"\nFROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\nFULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\nGROUP BY \"cp\".\"name\") AS \"t0\"\nFULL JOIN (SELECT \"proc_name\", SUM(\"num_users\") AS \"num_users_total\"\nFROM (SELECT \"cp\".\"name\" AS \"proc_name\", \"p\".\"team_id\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\nFROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\nFULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\nLEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"p\".\"team_id\"\nFULL JOIN \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"a\".\"team_id\" = \"t\".\"id\"\nGROUP BY \"cp\".\"name\", \"p\".\"team_id\")\nGROUP BY \"proc_name\") AS \"t1\" ON \"t1\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"user_id\") AS \"num_users_active\"\nFROM \"elastic2\".\"logs\".\"log\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\nWHERE \"model\" = 'ASSET'\nGROUP BY \"coproductionprocess\".\"name\") AS \"t2\" ON \"t2\".\"proc_name\" = \"t1\".\"proc_name\"\nORDER BY COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view002yy_num_TEAMS_USERS3_per_PROCESS",
      "sql": "create or replace view grafana.Serge_view002yy_num_TEAMS_USERS3_per_PROCESS as SELECT COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t0\".\"proc_name\") AS \"proc_name\", \n       \"t0\".\"num_teams\", \n       \"t1\".\"num_users_total\", \n       \"t2\".\"num_users_active\", \n       CASE WHEN \"t1\".\"num_users_total\" = 0 OR \"t1\".\"num_users_total\" IS NULL\n       THEN NULL \n       ELSE ROUND(100 * \"t2\".\"num_users_active\" / \"t1\".\"num_users_total\") \n       END AS \"fraction_active_PCT\"\nFROM (\n    SELECT \"cp\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"p\".\"team_id\") AS \"num_teams\"\n    FROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\n    FULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\n    GROUP BY \"cp\".\"name\"\n) AS \"t0\"\nFULL JOIN (\n    SELECT \"proc_name\", SUM(\"num_users\") AS \"num_users_total\"\n    FROM (\n        SELECT \"cp\".\"name\" AS \"proc_name\", \n        -- \"p\".\"team_id\", \n        COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\n        FROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\n        FULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\n        LEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"p\".\"team_id\"\n        FULL JOIN \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON cast(\"a\".\"team_id\" as varchar(255)) = \"t\".\"id\"\n        GROUP BY \"cp\".\"name\" --, \"p\".\"team_id\"\n/*        \n        SELECT \"cp\".\"name\" AS \"proc_name\", \"p\".\"team_id\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\n        FROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\n        FULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\n        LEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"p\".\"team_id\"\n        FULL JOIN \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"a\".\"team_id\" = \"t\".\"id\"\n        GROUP BY \"cp\".\"name\", \"p\".\"team_id\"\n*/\n    )\n    GROUP BY \"proc_name\"\n) AS \"t1\" ON \"t1\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (\n    SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"user_id\") AS \"num_users_active\"\n    FROM \"elastic2\".\"logs\".\"log\"\n    INNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\n    WHERE \"model\" = 'ASSET'\n    GROUP BY \"coproductionprocess\".\"name\"\n) AS \"t2\" ON \"t2\".\"proc_name\" = \"t1\".\"proc_name\"\nORDER BY COALESCE(\"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t0\".\"proc_name\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view003x_num_users2_per_ROLE",
      "sql": "create or replace view grafana.Serge_view003x_num_users2_per_ROLE as SELECT COALESCE(\"t1\".\"team_type\", \"t2\".\"team_type\") AS \"team_type\", \"t1\".\"num_users\" AS \"num_users_total\", \"t2\".\"num_users_active\"\nFROM (\n    SELECT \"coproduction\".\"public\".\"team\".\"type\" AS \"Team_Type\", COUNT(\"coproduction\".\"public\".\"association_user_team\".\"user_id\") AS \"num_users\"\n    FROM \"coproduction\".\"public\".\"team\"\n    INNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"coproduction\".\"public\".\"team\".\"id\" = \"coproduction\".\"public\".\"association_user_team\".\"team_id\"\n    GROUP BY \"team\".\"type\"\n) AS \"t1\"\nFULL JOIN (\n    SELECT \"team\".\"type\" AS \"team_type\", COUNT(DISTINCT \"log\".\"user_id\") AS \"num_users_active\"\n    FROM \"elastic2\".\"logs\".\"log\"\n    INNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"log\".\"user_id\"\n    INNER JOIN \"coproduction\".\"public\".\"team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"\n    WHERE \"elastic2\".\"logs\".\"log\".\"model\" = 'ASSET'\n    GROUP BY \"team\".\"type\"\n    ORDER BY \"team\".\"type\"\n) AS \"t2\" ON \"t2\".\"team_type\" = \"t1\".\"team_type\"\nORDER BY \"team_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view004_num_USERS_per_PROC_per_ROLE",
      "sql": "create or replace view grafana.Serge_view004_num_USERS_per_PROC_per_ROLE as SELECT \"team\".\"type\" AS \"team_type\", \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"association_user_team\".\"user_id\") AS \"num_users\"\nFROM \"coproduction\".\"public\".\"team\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"\nLEFT JOIN \"coproduction\".\"public\".\"permission\" ON \"permission\".\"team_id\" = \"association_user_team\".\"team_id\"\nLEFT JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"permission\".\"coproductionprocess_id\"\nGROUP BY \"team\".\"type\", \"coproductionprocess\".\"name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view005a_num_ACTIVE_USERS_total",
      "sql": "create or replace view grafana.Serge_view005a_num_ACTIVE_USERS_total as SELECT count(distinct(\"user_id\"))\nFROM \"elastic2\".\"logs\".\"log\"\nWHERE \"model\" = 'ASSET'",
      "extract_count": "False"
  },
  {
      "name": "Serge_view005d_num_ACTIVE_USERS_per_PROC_per_ROLE",
      "sql": "create or replace view grafana.Serge_view005d_num_ACTIVE_USERS_per_PROC_per_ROLE as SELECT \"coproductionprocess\".\"name\" AS \"process_name\", \"team\".\"type\" AS \"team_type\", COUNT(DISTINCT \"log\".\"user_id\") AS \"num_active_users\"\nFROM \"elastic2\".\"logs\".\"log\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"log\".\"user_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\nWHERE \"elastic2\".\"logs\".\"log\".\"model\" = 'ASSET'\nGROUP BY \"coproductionprocess\".\"name\", \"team\".\"type\"\nORDER BY \"coproductionprocess\".\"name\", \"team\".\"type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view006_num_USERS_per_TEAM",
      "sql": "create or replace view grafana.Serge_view006_num_USERS_per_TEAM as SELECT \"team\".\"name\" AS \"Team_Name\", \"team\".\"type\" AS \"Team_Type\", COUNT(\"user_id\") AS \"num_users\"\nFROM \"coproduction\".\"public\".\"association_user_team\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"\nGROUP BY \"team\".\"name\", \"team\".\"type\"\nORDER BY \"team\".\"name\", \"team\".\"type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view007a_num_ACTIVE_USERS_per_PROC_per_TEAM",
      "sql": "create or replace view grafana.Serge_view007a_num_ACTIVE_USERS_per_PROC_per_TEAM as SELECT \"coproductionprocess\".\"name\" AS \"process_name\", \"team\".\"name\" AS \"team_name\", COUNT(DISTINCT \"log\".\"user_id\") AS \"num_active_users\"\nFROM \"elastic2\".\"logs\".\"log\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"log\".\"user_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"log\".\"coproductionprocess_id\"\nWHERE \"elastic2\".\"logs\".\"log\".\"model\" = 'ASSET'\nGROUP BY \"coproductionprocess\".\"name\", \"team\".\"name\"\nORDER BY \"coproductionprocess\".\"name\", \"team\".\"name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view008a_num_ACTIVE_USERS_per_INTERL_TYPE",
      "sql": "create or replace view grafana.Serge_view008a_num_ACTIVE_USERS_per_INTERL_TYPE as SELECT \"int_type\", COUNT(\"creator_id\") AS \"num_users\"\nFROM (SELECT \"asset\".\"creator_id\", \"interlinker\".\"nature\" AS \"int_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"interlinker\".\"nature\" AS \"int_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"interlinker\".\"nature\" AS \"int_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"externalasset\".\"externalinterlinker_id\")\nGROUP BY \"int_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view008b_num_ACTIVE_USERS_per_INTERL",
      "sql": "create or replace view grafana.Serge_view008b_num_ACTIVE_USERS_per_INTERL as SELECT \"proc_name\" AS \"Process_Name\", \"int_type\" AS \"INTERL_type\", COUNT(\"creator_id\") AS \"num_active_users\"\nFROM (SELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\")\nGROUP BY \"proc_name\", \"int_type\"\nORDER BY \"proc_name\", \"int_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view009a_num_ACTIVE_USERS_per_INTERL_TYPE_per_PROC",
      "sql": "create or replace view grafana.Serge_view009a_num_ACTIVE_USERS_per_INTERL_TYPE_per_PROC as SELECT \"int_type\", \"proc_name\", COUNT(\"creator_id\") AS \"num_users\"\nFROM (SELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"interlinker\".\"nature\" AS \"int_type\", \"coproductionprocess\".\"name\" AS \"proc_name\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\")\nGROUP BY \"proc_name\", \"int_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view009b_num_ACTIVE_USERS_per_INTERL_per_PROC",
      "sql": "create or replace view grafana.Serge_view009b_num_ACTIVE_USERS_per_INTERL_per_PROC as SELECT \"proc_name\" AS \"Process_Name\", \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"int_name2\", ',', 1), '=>', 2), '\"', 2) AS \"INTERL_name\", COUNT(\"user_id\") AS \"num_active_users\"\nFROM (SELECT \"asset\".\"creator_id\" AS \"user_id\", \"asset\".\"coproductionprocess_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"internalasset\".\"knowledgeinterlinker_id\" AS \"int_id\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"internalasset\".\"softwareinterlinker_id\" AS \"int_id\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"internalasset\".\"softwareinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"asset\".\"creator_id\", \"asset\".\"coproductionprocess_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"externalasset\".\"externalinterlinker_id\" AS \"int_id\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"externalasset\".\"externalinterlinker_id\" IS NOT NULL)\nGROUP BY \"proc_name\", \"int_name2\"\nORDER BY \"proc_name\", \"int_name2\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view010a_num_USERS_per_INTERL_type_per_ROLE",
      "sql": "create or replace view grafana.Serge_view010a_num_USERS_per_INTERL_type_per_ROLE as SELECT \"team_type\", \"int_type\" AS \"INTERL_type\", COUNT(\"user_id\") AS \"num_users\"\nFROM (SELECT \"asset\".\"creator_id\" AS \"user_id\", \"interlinker\".\"nature\" AS \"int_type\", \"team\".\"type\" AS \"team_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"interlinker\".\"nature\" AS \"int_type\", \"team\".\"type\" AS \"team_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\"\nUNION\nSELECT \"asset\".\"creator_id\", \"interlinker\".\"nature\" AS \"int_type\", \"team\".\"type\" AS \"team_type\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"interlinker\" ON \"interlinker\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\")\nGROUP BY \"team_type\", \"int_type\"\nORDER BY \"team_type\", \"int_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view010b_num_USERS_per_INTERL_per_ROLE",
      "sql": "create or replace view grafana.Serge_view010b_num_USERS_per_INTERL_per_ROLE as SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"int_name2\", ',', 1), '=>', 2), '\"', 2) AS \"INTERL_name\", \"team_type\", COUNT(\"user_id\") AS \"num_users\"\nFROM (SELECT \"asset\".\"creator_id\" AS \"user_id\", \"team\".\"type\" AS \"team_type\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nWHERE \"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"asset\".\"creator_id\", \"team\".\"type\" AS \"team_type\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"internalasset\" ON \"internalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nWHERE \"internalasset\".\"softwareinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"asset\".\"creator_id\", \"team\".\"type\" AS \"team_type\", \"artefact\".\"name_translations\" AS \"int_name2\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"externalasset\" ON \"externalasset\".\"id\" = \"asset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"association_user_team\" ON \"association_user_team\".\"user_id\" = \"asset\".\"creator_id\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"association_user_team\".\"team_id\" = \"team\".\"id\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nWHERE \"externalasset\".\"externalinterlinker_id\" IS NOT NULL)\nGROUP BY \"team_type\", \"int_name2\"\nORDER BY \"int_name2\", \"team_type\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view011_num_PROCESSES",
      "sql": "create or replace view grafana.Serge_view011_num_PROCESSES as SELECT count(distinct(\"id\"))\nFROM \"coproduction\".\"public\".\"coproductionprocess\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view015_num_PROC_per_SCHEMA",
      "sql": "create or replace view grafana.Serge_view015_num_PROC_per_SCHEMA as SELECT COUNT(DISTINCT \"id\")\nFROM \"coproduction\".\"public\".\"coproductionprocess\"\nWHERE \"schema_used\" = '986372b8-6167-4b17-afb7-2b8706e3d9fe'",
      "extract_count": "False"
  },
  {
      "name": "Serge_view015aa_num_PROC_per_SCHEMA",
      "sql": "create or replace view grafana.Serge_view015aa_num_PROC_per_SCHEMA as SELECT a.name_translations as schema_name, count(distinct( cp.id )) as num_proc\nfrom \"coproduction\".\"public\".\"coproductionprocess\" cp\nfull outer join (\n    select *\n    from catalogue.public.artefact \n    where artefact_type = 'coproductionschema'\n) a on cp.schema_used = a.id\ngroup by a.name_translations\n\n/*\nSELECT a.name_translations as schema_name, count(cp.id) as num_proc -- , cp.schema_used -- schema_used, COUNT(DISTINCT cp.id)\nfrom catalogue.public.artefact a \nleft join  \"coproduction\".\"public\".\"coproductionprocess\" cp on cp.schema_used = a.id\nwhere a.artefact_type = 'coproductionschema'\ngroup by a.name_translations\n*/",
      "extract_count": "False"
  },
  {
      "name": "Serge_view022a_num_USED_INTERL",
      "sql": "create or replace view grafana.Serge_view022a_num_USED_INTERL as SELECT COUNT(\"id2\") AS \"num_USED_INTERL\"\nFROM (SELECT DISTINCT \"softwareinterlinker_id\" AS \"id2\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL\nUNION\nSELECT DISTINCT \"knowledgeinterlinker_id\" AS \"id2\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT DISTINCT \"externalinterlinker_id\" AS \"id2\"\nFROM \"coproduction\".\"public\".\"externalasset\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view022b_num_USED_INTERL_Internal_Knowledge",
      "sql": "create or replace view grafana.Serge_view022b_num_USED_INTERL_Internal_Knowledge as SELECT COUNT(DISTINCT \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\") AS \"num_USED_Knowledge_INTERL\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL",
      "extract_count": "False"
  },
  {
      "name": "Serge_view022c_num_USED_INTERL_InternalSW",
      "sql": "create or replace view grafana.Serge_view022c_num_USED_INTERL_InternalSW as SELECT COUNT(DISTINCT \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\") AS \"num_USED_INTERL_InternalSW\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL",
      "extract_count": "False"
  },
  {
      "name": "Serge_view022d_num_USED_INTERL_ExternalSW",
      "sql": "create or replace view grafana.Serge_view022d_num_USED_INTERL_ExternalSW as SELECT COUNT(DISTINCT \"coproduction\".\"public\".\"externalasset\".\"externalinterlinker_id\") AS \"num_USED_INTERL_ExternalSW\"\nFROM \"coproduction\".\"public\".\"externalasset\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view023a_use_frequency_of_INTERL_InternalKnowledge",
      "sql": "create or replace view grafana.Serge_view023a_use_frequency_of_INTERL_InternalKnowledge as SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"artefact\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"INTERL_name\", COUNT(\"internalasset\".\"knowledgeinterlinker_id\") AS \"num_times_used\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nWHERE \"knowledgeinterlinker_id\" IS NOT NULL\nGROUP BY \"artefact\".\"name_translations\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view023b_use_frequency_of_INTERL_InternalSW",
      "sql": "create or replace view grafana.Serge_view023b_use_frequency_of_INTERL_InternalSW as SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"artefact\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"INTERL_name\", COUNT(\"internalasset\".\"softwareinterlinker_id\") AS \"num_times_used\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nWHERE \"knowledgeinterlinker_id\" IS NULL AND \"softwareinterlinker_id\" IS NOT NULL\nGROUP BY \"artefact\".\"name_translations\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view023c_use_frequency_of_INTERL_ExternalSW",
      "sql": "create or replace view grafana.Serge_view023c_use_frequency_of_INTERL_ExternalSW as SELECT \"externalasset\".\"uri\", COUNT(\"externalasset\".\"id\") AS \"num_times_used\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nGROUP BY \"externalasset\".\"uri\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view024x_num_USED_INTERL_per_PROC",
      "sql": "create or replace view grafana.Serge_view024x_num_USED_INTERL_per_PROC as SELECT COALESCE(\"t0\".\"proc_name\", \"t1\".\"proc_name\") AS \"proc_name\", \"num_used_INTERL_TOTAL\", \"num_used_INTERL_IntKnow\", \"num_used_INTERL_IntSW\", \"num_used_INTERL_ExtSW\"\nFROM (SELECT \"proc_name\", COUNT(\"int_id\") AS \"num_used_INTERL_TOTAL\"\nFROM (SELECT \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", 'internal_knowledge' AS \"type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", 'internal_sw' AS \"type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL\nUNION\nSELECT \"coproduction\".\"public\".\"externalasset\".\"externalinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", 'external_sw' AS \"type\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"externalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\")\nGROUP BY \"proc_name\"\nORDER BY \"proc_name\") AS \"t0\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"internalasset\".\"knowledgeinterlinker_id\") AS \"num_used_INTERL_IntKnow\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nGROUP BY \"coproductionprocess\".\"name\") AS \"t1\" ON \"t1\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"internalasset\".\"softwareinterlinker_id\") AS \"num_used_INTERL_IntSW\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL\nGROUP BY \"coproductionprocess\".\"name\") AS \"t2\" ON \"t2\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"externalasset\".\"uri\") AS \"num_used_INTERL_ExtSW\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"externalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nGROUP BY \"coproductionprocess\".\"name\") AS \"t3\" ON \"t3\".\"proc_name\" = \"t0\".\"proc_name\"\nORDER BY \"proc_name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view025_num_USED_INTERL_per_SCHEMA",
      "sql": "create or replace view grafana.Serge_view025_num_USED_INTERL_per_SCHEMA as SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"schema_name\", ',', 1), '=>', 2), '\"', 2) AS \"schema_name2\", COUNT(DISTINCT \"int_id\") AS \"num_used_INTERL\"\nFROM (SELECT \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'internal_knowledge' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nLEFT JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'internal_sw' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nLEFT JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL\nUNION\nSELECT \"concat\"('id-', \"externalasset\".\"externalinterlinker_id\") AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'external_sw' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"externalasset\".\"id\"\nLEFT JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\")\nGROUP BY \"schema_name\"\nORDER BY \"schema_name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view026_num_USED_INTERL_per_SCHEMA_per_PROC",
      "sql": "create or replace view grafana.Serge_view026_num_USED_INTERL_per_SCHEMA_per_PROC as SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"schema_name\", ',', 1), '=>', 2), '\"', 2) AS \"schema_name2\", \"proc_name\", COUNT(DISTINCT \"int_id\") AS \"num_USED_INTERL\"\nFROM (SELECT \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'internal_knowledge' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"public\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'internal_sw' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"public\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL\nUNION\nSELECT \"coproduction\".\"public\".\"externalasset\".\"externalinterlinker_id\" AS \"int_id\", \"coproduction\".\"public\".\"asset\".\"coproductionprocess_id\" AS \"proc_id\", \"coproductionprocess\".\"name\" AS \"proc_name\", \"coproductionprocess\".\"schema_used\", \"a\".\"name_translations\" AS \"schema_name\", 'external_sw' AS \"int_type\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"externalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nLEFT JOIN \"catalogue\".\"public\".\"artefact\" AS \"a\" ON \"a\".\"id\" = \"coproductionprocess\".\"schema_used\")\nGROUP BY \"schema_name\", \"proc_name\"\nORDER BY \"schema_name\", \"proc_name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view031b_num_ASSETS_for_InterKnow_INTERL",
      "sql": "create or replace view grafana.Serge_view031b_num_ASSETS_for_InterKnow_INTERL as SELECT COUNT(DISTINCT \"id\")\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"knowledgeinterlinker_id\" IS NOT NULL",
      "extract_count": "False"
  },
  {
      "name": "Serge_view031c_num_ASSETS_for_InterSW_INTERL",
      "sql": "create or replace view grafana.Serge_view031c_num_ASSETS_for_InterSW_INTERL as SELECT COUNT(DISTINCT \"id\")\nFROM \"coproduction\".\"public\".\"internalasset\"\nWHERE \"softwareinterlinker_id\" IS NOT NULL AND \"knowledgeinterlinker_id\" IS NULL",
      "extract_count": "False"
  },
  {
      "name": "Serge_view031d_num_ASSETS_for_ExterSW_INTERL",
      "sql": "create or replace view grafana.Serge_view031d_num_ASSETS_for_ExterSW_INTERL as SELECT COUNT(*)\nFROM \"coproduction\".\"public\".\"externalasset\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view032x_num_ASSETS_per_PROCESS",
      "sql": "create or replace view grafana.Serge_view032x_num_ASSETS_per_PROCESS as SELECT COALESCE(\"t0\".\"proc_name\", \"t1\".\"proc_name\", \"t2\".\"proc_name\", \"t3\".\"proc_name\") AS \"proc_name\", \"t0\".\"num_assets_TOTAL\", \"t1\".\"num_assets_InternalKnow\", \"t2\".\"num_assets_InternalSW\", \"t3\".\"num_assets_ExternalSW\"\nFROM (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"asset\".\"id\") AS \"num_assets_TOTAL\"\nFROM \"coproduction\".\"public\".\"asset\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nGROUP BY \"coproductionprocess\".\"name\") AS \"t0\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"asset\".\"id\") AS \"num_assets_InternalKnow\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NOT NULL\nGROUP BY \"coproductionprocess\".\"name\") AS \"t1\" ON \"t1\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"asset\".\"id\") AS \"num_assets_InternalSW\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"internalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"coproduction\".\"public\".\"internalasset\".\"softwareinterlinker_id\" IS NOT NULL AND \"coproduction\".\"public\".\"internalasset\".\"knowledgeinterlinker_id\" IS NULL\nGROUP BY \"coproductionprocess\".\"name\") AS \"t2\" ON \"t2\".\"proc_name\" = \"t0\".\"proc_name\"\nFULL JOIN (SELECT \"coproductionprocess\".\"name\" AS \"proc_name\", COUNT(\"asset\".\"id\") AS \"num_assets_ExternalSW\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"coproduction\".\"public\".\"asset\" ON \"asset\".\"id\" = \"externalasset\".\"id\"\nINNER JOIN \"coproduction\".\"public\".\"coproductionprocess\" ON \"coproductionprocess\".\"id\" = \"asset\".\"coproductionprocess_id\"\nWHERE \"externalasset\".\"uri\" IS NOT NULL\nGROUP BY \"coproductionprocess\".\"name\") AS \"t3\" ON \"t3\".\"proc_name\" = \"t0\".\"proc_name\"\nORDER BY \"proc_name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view033x",
      "sql": "create or replace view grafana.Serge_view033x_num_ASSETS_per_INTERL as SELECT *\nFROM (SELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"artefact\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"int_name\", 'Internal_Knowledge' AS \"int_type\", COUNT(DISTINCT \"internalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nGROUP BY \"artefact\".\"name_translations\"\nUNION\nSELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"artefact\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"int_name\", 'Internal_SW' AS \"int_type\", COUNT(DISTINCT \"internalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nGROUP BY \"artefact\".\"name_translations\"\nUNION\nSELECT \"uri\" AS \"int_name\", 'External_SW' AS \"int_type\", COUNT(DISTINCT \"externalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nGROUP BY \"externalasset\".\"uri\")\nORDER BY \"int_type\", \"int_name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view033x_num_ASSETS_per_INTERL",
      "sql": "create or replace view grafana.Serge_view033x_num_ASSETS_per_INTERL as SELECT \"int_name2\", \"num_assets\"\nFROM (SELECT \"artefact\".\"name_translations\" AS \"int_name2\", COUNT(DISTINCT \"internalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"knowledgeinterlinker_id\"\nGROUP BY \"artefact\".\"name_translations\"\nUNION\nSELECT \"artefact\".\"name_translations\" AS \"int_name2\", COUNT(DISTINCT \"internalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"internalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"internalasset\".\"softwareinterlinker_id\"\nGROUP BY \"artefact\".\"name_translations\"\nUNION\nSELECT \"artefact\".\"name_translations\" AS \"int_name2\", COUNT(DISTINCT \"externalasset\".\"id\") AS \"num_assets\"\nFROM \"coproduction\".\"public\".\"externalasset\"\nINNER JOIN \"catalogue\".\"public\".\"artefact\" ON \"artefact\".\"id\" = \"externalasset\".\"externalinterlinker_id\"\nGROUP BY \"artefact\".\"name_translations\")",
      "extract_count": "False"
  },
  {
      "name": "Serge_view054_num_TEAMS_per_PROCESS",
      "sql": "create or replace view grafana.Serge_view054_num_TEAMS_per_PROCESS as SELECT \"cp\".\"name\" AS \"proc_name\", COUNT(DISTINCT \"p\".\"team_id\") AS \"num_teams\"\nFROM \"coproduction\".\"public\".\"coproductionprocess\" AS \"cp\"\nFULL JOIN \"coproduction\".\"public\".\"permission\" AS \"p\" ON \"cp\".\"id\" = \"p\".\"coproductionprocess_id\"\nGROUP BY \"cp\".\"name\"\nORDER BY \"cp\".\"name\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view058_num_USERS_per_ORG",
      "sql": "create or replace view grafana.Serge_view058_num_USERS_per_ORG as /*\nSELECT a.name_translations, c.user_id\nfrom coproduction.organization a\nleft join coproduction.team b ON a.id = b.organization_id\nleft join coproduction.association_user_team c ON b.id = cast(c.team_id as VARCHAR(255))\n*/\n\n\n\n/*\n\n-- select *\n-- from \"coproduction\".\"public\".\"organization\" AS \"o\"\n-- left join (\n\nselect t.id as team_id, t.name as team_name, t.organization_id as org_id, a.user_id as user_id\nfrom \"coproduction\".\"public\".\"team\" AS \"t\"\nleft join \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"t\".\"id\" = \"a\".\"team_id\"\n\n-- ) as ta on ta.org_id = o.id\n\n\nSELECT * -- \"o\".\"name_translations\" -- , \"a\".\"user_id\"\n-- \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"o\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"org_name\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\nfrom \"coproduction\".\"public\".\"organization\" AS \"o\"\nleft join \"coproduction\".\"public\".\"team\" AS \"t\" ON \"o\".\"id\" = \"t\".\"organization_id\"\nleft join \"coproduction\".\"public\".\"association_user_team\" AS \"a\" ON \"t\".\"id\" = \"a\".\"team_id\"\n-- GROUP BY \"o\".\"name_translations\"\n-- ORDER BY \"o\".\"name_translations\"\n*/\n\n\nSELECT \"SPLIT_PART\"(\"SPLIT_PART\"(\"SPLIT_PART\"(\"o\".\"name_translations\", ',', 1), '=>', 2), '\"', 2) AS \"org_name\", COUNT(DISTINCT \"a\".\"user_id\") AS \"num_users\"\nFROM \"coproduction\".\"public\".\"association_user_team\" AS \"a\"\nLEFT JOIN \"coproduction\".\"public\".\"team\" AS \"t\" ON \"t\".\"id\" = \"a\".\"team_id\"\nLEFT JOIN \"coproduction\".\"public\".\"organization\" AS \"o\" ON \"o\".\"id\" = \"t\".\"organization_id\"\nGROUP BY \"o\".\"name_translations\"\nORDER BY \"o\".\"name_translations\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view058_num_USERS_per_ORGL",
      "sql": "create or replace view grafana.Serge_view058_num_USERS_per_ORGL as SELECT \"team\".\"organization_id\", \"association_user_team\".\"user_id\"\nFROM \"coproduction\".\"public\".\"association_user_team\"\nINNER JOIN \"coproduction\".\"public\".\"team\" ON \"team\".\"id\" = \"association_user_team\".\"team_id\"",
      "extract_count": "False"
  },
  {
      "name": "Serge_view061_num_proc_logs",
      "sql": "create or replace view grafana.Serge_view061_num_proc_logs as select count(distinct(coproductionprocess_id)) as num_proc_logs\nfrom elastic2.logs.log\nwhere model = 'COPRODUCTIONPROCESS'\nand action = 'CREATE'\n\n\n--select count(distinct(id)) as num_org\n--from coproduction.public.organization",
      "extract_count": "False"
  },
  {
      "name": "Serge_view062_num_assets_logs",
      "sql": "create or replace view grafana.Serge_view062_num_assets_logs as select count(distinct(object_id)) as num_assets_logs\nfrom elastic2.logs.log\nwhere model = 'ASSET' -- COPRODUCTIONPROCESS'\nand action = 'CREATE'\n\n\n--select count(distinct(id)) as num_org\n--from coproduction.public.organization\n",
      "extract_count": "False"
  }
]